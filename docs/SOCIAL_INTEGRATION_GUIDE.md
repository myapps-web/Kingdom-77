# دليل نظام التكامل مع وسائل التواصل الاجتماعي 🔗
**Kingdom-77 Bot v4.0 - Phase 5.7**

## نظرة عامة 📋

نظام التكامل مع وسائل التواصل الاجتماعي يسمح لسيرفرك بالحصول على إشعارات تلقائية عند نشر محتوى جديد على 7 منصات رئيسية:

- 🎥 **YouTube** - فيديوهات جديدة
- 🟣 **Twitch** - بث مباشر
- 🟢 **Kick** - بث مباشر
- 🐦 **Twitter/X** - تغريدات جديدة
- 📷 **Instagram** - منشورات جديدة
- 🎵 **TikTok** - فيديوهات جديدة
- 👻 **Snapchat** - قصص جديدة (NEW!)

---

## الميزات الرئيسية ✨

### 1. الربط المجاني
- **2 روابط مجانية** لكل سيرفر
- دعم جميع المنصات السبعة
- إشعارات تلقائية كل 5 دقائق
- تخصيص قناة الإشعارات
- إمكانية الإشارة إلى رتبة معينة

### 2. روابط إضافية
- شراء روابط إضافية: **200 ❄️** للرابط الواحد
- دائمة (لا تحتاج تجديد)
- لا حد أقصى للروابط المشتراة
- تحسب الروابط لكل منصة بشكل منفصل

### 3. إشعارات ذكية
- Embeds مخصصة بألوان المنصة
- صور مصغرة (عند توفرها)
- روابط مباشرة للمحتوى
- معلومات تفصيلية (العنوان، الناشر، التاريخ)
- عدم تكرار الإشعارات

### 4. إدارة سهلة
- 10 أوامر شاملة
- واجهة عربية/إنجليزية
- نظام تبديل (تفعيل/تعطيل)
- إحصائيات مفصلة
- اختبار الإشعارات

---

## دليل البدء السريع 🚀

### الخطوة 1: ربط أول حساب
```
/social link
```
**الخيارات:**
- `platform`: اختر المنصة (youtube, twitch, kick, twitter, instagram, tiktok, snapchat)
- `url`: الصق رابط القناة/الحساب
- `channel`: اختر قناة الإشعارات
- `role`: (اختياري) رتبة للإشارة

**مثال:**
```
/social link
platform: youtube
url: https://www.youtube.com/@username
channel: #announcements
role: @Subscribers
```

### الخطوة 2: عرض الروابط المضافة
```
/social list
```
يعرض جميع الروابط مع:
- حالة الرابط (✅ مفعل / ❌ معطل)
- قناة الإشعارات
- عدد الإشعارات المرسلة
- معرف الرابط (Link ID)

### الخطوة 3: اختبار الإشعار
```
/social test link_id: [معرف الرابط]
```
يرسل إشعار تجريبي للتحقق من الإعدادات.

---

## الأوامر المتاحة 📜

### `/social link` - ربط حساب
**الوصف:** ربط قناة/حساب من منصة اجتماعية.

**الصلاحيات المطلوبة:** Manage Server

**الخيارات:**
- `platform`: المنصة (youtube, twitch, kick, twitter, instagram, tiktok, snapchat)
- `url`: رابط القناة/الحساب
- `channel`: قناة Discord للإشعارات
- `role`: (اختياري) رتبة للإشارة

**أمثلة للروابط:**
```
YouTube:
- https://www.youtube.com/@username
- https://www.youtube.com/channel/UC...
- https://www.youtube.com/c/channelname

Twitch:
- https://www.twitch.tv/username

Kick:
- https://kick.com/username

Twitter/X:
- https://twitter.com/username
- https://x.com/username

Instagram:
- https://www.instagram.com/username

TikTok:
- https://www.tiktok.com/@username

Snapchat:
- https://www.snapchat.com/add/username
```

**الرسائل الممكنة:**
- ✅ تم إضافة الرابط بنجاح
- ❌ وصلت للحد الأقصى من الروابط المجانية (استخدم `/social purchase-link`)
- ❌ رابط غير صالح
- ❌ الرابط موجود مسبقاً

---

### `/social unlink` - إلغاء ربط
**الوصف:** حذف رابط موجود.

**الصلاحيات المطلوبة:** Manage Server

**الخيارات:**
- `link_id`: معرف الرابط (احصل عليه من `/social list`)

**مثال:**
```
/social unlink link_id: abc123def456
```

---

### `/social list` - عرض الروابط
**الوصف:** عرض جميع الروابط المضافة في السيرفر.

**الصلاحيات المطلوبة:** لا يوجد

**المعلومات المعروضة:**
- 🎥/🟣/🟢/🐦/📷/🎵/👻 رمز المنصة
- اسم المنصة
- الحالة (✅ مفعل / ❌ معطل)
- قناة الإشعارات
- عدد الإشعارات المرسلة
- معرف الرابط (Link ID)

**ملاحظة:** يعرض 10 روابط في كل مرة. إذا كان لديك أكثر من 10، سيظهر إجمالي العدد.

---

### `/social toggle` - تفعيل/تعطيل رابط
**الوصف:** تشغيل أو إيقاف رابط دون حذفه.

**الصلاحيات المطلوبة:** Manage Server

**الخيارات:**
- `link_id`: معرف الرابط

**مثال:**
```
/social toggle link_id: abc123def456
```

**فائدة:** مفيد لإيقاف الإشعارات مؤقتاً دون حذف الرابط.

---

### `/social test` - اختبار إشعار
**الوصف:** إرسال إشعار تجريبي للتحقق من الإعدادات.

**الصلاحيات المطلوبة:** لا يوجد

**الخيارات:**
- `link_id`: معرف الرابط

**مثال:**
```
/social test link_id: abc123def456
```

**ماذا يفعل:**
- يرسل embed تجريبي بنفس تنسيق الإشعار الحقيقي
- يتضمن عنوان "🧪 اختبار إشعار [المنصة]"
- يظهر في قناة الإشعارات المحددة
- لا يؤثر على الإحصائيات

---

### `/social stats` - إحصائيات
**الوصف:** عرض إحصائيات شاملة للسيرفر.

**الصلاحيات المطلوبة:** لا يوجد

**المعلومات المعروضة:**
- **إجمالي:**
  - عدد الروابط
  - الروابط النشطة
  - إجمالي الإشعارات المرسلة
  
- **حسب المنصة:**
  - 🎥 YouTube: 3 (125 إشعار)
  - 🟣 Twitch: 1 (45 إشعار)
  - 👻 Snapchat: 2 (78 إشعار)
  - ...

**مثال:**
```
/social stats
```

---

### `/social mylimits` - حدود الروابط
**الوصف:** عرض حدودك الحالية واستخدامك.

**الصلاحيات المطلوبة:** لا يوجد

**المعلومات المعروضة:**
- **الروابط المجانية:**
  - المستخدمة: 2/2
  - المتبقية: 0
  
- **الروابط المشتراة:**
  - العدد: 3
  - السعر: 200 ❄️ للرابط
  
- **الإجمالي:**
  - الروابط: 5
  - يمكن الإضافة: نعم ✅
  
- **التوزيع حسب المنصة:**
  - 🎥 YouTube: 2
  - 🟣 Twitch: 1
  - 👻 Snapchat: 2

**مثال:**
```
/social mylimits
```

---

### `/social purchase-link` - شراء رابط
**الوصف:** شراء رابط إضافي دائم.

**الصلاحيات المطلوبة:** Manage Server

**السعر:** 200 ❄️ (دائم - لا يحتاج تجديد)

**الميزات:**
- دائم (لا يحتاج تجديد)
- دعم جميع المنصات السبعة
- إشعارات تلقائية كل 5 دقائق

**مثال:**
```
/social purchase-link
```

**الخطوات:**
1. اضغط على الأمر
2. ستظهر معلومات الشراء
3. اضغط "💎 شراء رابط (200 ❄️)"
4. سيتم خصم الكريديت تلقائياً
5. يمكنك الآن إضافة رابط جديد!

**ملاحظة:** تأكد من امتلاكك 200 ❄️ قبل الشراء. استخدم `/credits balance` للتحقق.

---

### `/social notifications` - تعديل قناة الإشعارات
**الوصف:** تغيير قناة الإشعارات لرابط موجود.

**الصلاحيات المطلوبة:** Manage Server

**الخيارات:**
- `link_id`: معرف الرابط
- `channel`: القناة الجديدة

**مثال:**
```
/social notifications
link_id: abc123def456
channel: #new-announcements
```

---

### `/social role` - تعديل رتبة الإشارة
**الوصف:** تعيين أو إلغاء رتبة للإشارة عند الإشعار.

**الصلاحيات المطلوبة:** Manage Server

**الخيارات:**
- `link_id`: معرف الرابط
- `role`: (اختياري) الرتبة - اتركه فارغاً للإلغاء

**أمثلة:**
```
# تعيين رتبة
/social role
link_id: abc123def456
role: @Subscribers

# إلغاء الرتبة
/social role
link_id: abc123def456
role: [اتركه فارغاً]
```

---

## دليل المنصات 🎯

### 🎥 YouTube

**الحالة:** ✅ مدعومة بالكامل (RSS Feeds)

**أنواع الروابط المدعومة:**
```
https://www.youtube.com/@username
https://www.youtube.com/channel/UC...
https://www.youtube.com/c/channelname
https://www.youtube.com/user/username
```

**ما يتم اكتشافه:**
- فيديوهات جديدة فقط
- البث المباشر (عند نشره كفيديو)

**ما لا يتم اكتشافه:**
- البث المباشر الفوري
- Shorts
- Community Posts

**الإشعار يتضمن:**
- ✅ عنوان الفيديو
- ✅ صورة مصغرة
- ✅ اسم القناة
- ✅ رابط مباشر
- ✅ تاريخ النشر

**فترة الاكتشاف:** 5-10 دقائق

---

### 🟣 Twitch

**الحالة:** ⚠️ يتطلب إعداد API

**أنواع الروابط:**
```
https://www.twitch.tv/username
```

**ما يتم اكتشافه:**
- بث مباشر فقط (عند بدء البث)

**متطلبات الإعداد:**
1. إنشاء Twitch Application: https://dev.twitch.tv/console/apps
2. إضافة Client ID و Client Secret للبيئة:
```env
TWITCH_CLIENT_ID=your_client_id
TWITCH_CLIENT_SECRET=your_client_secret
```

**الإشعار يتضمن:**
- ✅ عنوان البث
- ✅ صورة مصغرة
- ✅ اسم الستريمر
- ✅ رابط مباشر
- ✅ عدد المشاهدين (عند توفره)

**فترة الاكتشاف:** 5 دقائق

---

### 🟢 Kick

**الحالة:** ✅ مدعومة (Unofficial API)

**أنواع الروابط:**
```
https://kick.com/username
```

**ما يتم اكتشافه:**
- بث مباشر فقط (عند بدء البث)

**ملاحظات:**
- يستخدم API غير رسمية
- قد تتوقف إذا غيّر Kick بنية API
- لا تحتاج إعداد خاص

**الإشعار يتضمن:**
- ✅ عنوان البث
- ✅ صورة مصغرة (إن وُجدت)
- ✅ اسم الستريمر
- ✅ رابط مباشر

**فترة الاكتشاف:** 5 دقائق

---

### 🐦 Twitter/X

**الحالة:** ⚠️ يتطلب إعداد API (مدفوع)

**أنواع الروابط:**
```
https://twitter.com/username
https://x.com/username
```

**ما يتم اكتشافه:**
- تغريدات جديدة
- تغريدات الوسائط (صور/فيديو)

**متطلبات الإعداد:**
1. حساب Twitter Developer: https://developer.twitter.com/
2. الاشتراك في Basic Plan ($100/شهر) للوصول لـ API v2
3. إضافة Bearer Token للبيئة:
```env
TWITTER_BEARER_TOKEN=your_bearer_token
```

**الإشعار يتضمن:**
- ✅ نص التغريدة
- ✅ صور مصغرة (للوسائط)
- ✅ اسم المستخدم
- ✅ رابط مباشر
- ✅ تاريخ النشر

**فترة الاكتشاف:** 5 دقائق

**ملاحظة:** بسبب تكلفة API، هذه المنصة اختيارية.

---

### 📷 Instagram

**الحالة:** 🔄 تحت التطوير (Placeholder)

**أنواع الروابط:**
```
https://www.instagram.com/username
```

**الوضع الحالي:**
- لا يعمل حالياً
- يحفظ الرابط للمستقبل
- سيتم تفعيله في تحديث قادم

**السبب:**
- Instagram لا يوفر RSS feeds
- API الرسمية محدودة جداً
- تحتاج موافقة من Facebook
- حلول غير رسمية غير مستقرة

**الخطة المستقبلية:**
- استخدام Instagram Basic Display API
- أو unofficial scraping (محدود)

---

### 🎵 TikTok

**الحالة:** 🔄 تحت التطوير (Placeholder)

**أنواع الروابط:**
```
https://www.tiktok.com/@username
```

**الوضع الحالي:**
- لا يعمل حالياً
- يحفظ الرابط للمستقبل
- سيتم تفعيله في تحديث قادم

**السبب:**
- TikTok API محدودة
- تحتاج موافقة صعبة الحصول
- API غير رسمية تتغير باستمرار
- TikTok يمنع الطلبات الآلية

**الخطة المستقبلية:**
- استخدام TikTok Business API (إن أمكن)
- أو unofficial scraping محدود

---

### 👻 Snapchat (جديد!)

**الحالة:** ⚠️ مدعومة جزئياً (Unofficial)

**أنواع الروابط:**
```
https://www.snapchat.com/add/username
https://story.snapchat.com/@username
```

**ما يتم اكتشافه:**
- القصص العامة (Public Stories)
- يتم الكشف عند نشر قصة جديدة

**ملاحظات مهمة:**
- ✅ يعمل للحسابات العامة فقط
- ❌ لا يعمل للحسابات الخاصة
- ⚠️ لا توجد API رسمية
- ⚠️ يستخدم HTML parsing
- ⚠️ قد يتوقف إذا غيّر Snapchat البنية

**الإشعار يتضمن:**
- ✅ إشعار بقصة جديدة
- ✅ اسم الحساب
- ✅ رابط مباشر للقصة
- ✅ تاريخ الإنشاء
- ❌ لا توجد صورة مصغرة (Snapchat لا يعرضها)

**فترة الاكتشاف:** 5-10 دقائق

**مثال الإشعار:**
```
👻 Snapchat - قصة جديدة

📝 قصة جديدة من username
👤 المستخدم: username
🕐 التاريخ: قبل دقيقتين

🔗 [مشاهدة القصة](https://story.snapchat.com/@username)
```

**كيفية الحصول على الرابط:**
1. افتح Snapchat
2. ابحث عن المستخدم
3. اضغط "Add Friend" أو "View Profile"
4. انسخ الرابط من المتصفح

**أو:**
- ابحث عن الحساب في Google: `site:snapchat.com/add username`

---

## آلية عمل النظام ⚙️

### 1. التحقق الدوري (Background Task)
```
┌─────────────────────────────────────┐
│  كل 5 دقائق                        │
├─────────────────────────────────────┤
│  1. جلب جميع الروابط النشطة       │
│  2. التحقق من كل رابط بالترتيب     │
│     (فاصل 1 ثانية بين كل رابط)   │
│  3. مقارنة مع آخر محتوى محفوظ      │
│  4. إرسال إشعار للمحتوى الجديد    │
│  5. حفظ معلومات المحتوى الجديد     │
└─────────────────────────────────────┘
```

### 2. منع التكرار
- كل منشور له `post_id` فريد
- يتم حفظ `post_id` في قاعدة البيانات
- عند اكتشاف محتوى جديد، يتم مقارنة `post_id`
- إذا كان موجوداً مسبقاً، يتم تجاهله

### 3. الأداء والتحسين
- **فواصل زمنية:** 1 ثانية بين الروابط لتجنب Rate Limits
- **Caching:** تخزين مؤقت لتقليل الطلبات
- **Async:** معالجة متوازية للسرعة
- **Error Handling:** استمرار العمل عند فشل رابط واحد

---

## استكشاف الأخطاء 🔧

### ❌ "وصلت للحد الأقصى من الروابط المجانية"

**السبب:** استخدمت 2 روابط المجانية.

**الحل:**
1. احذف رابط قديم: `/social unlink`
2. أو اشترِ رابط إضافي: `/social purchase-link`

---

### ❌ "رابط غير صالح"

**الأسباب المحتملة:**
- تنسيق الرابط خاطئ
- الرابط لا يحتوي على username
- منصة غير مدعومة

**الحل:**
- تأكد من نسخ الرابط كاملاً
- استخدم أحد التنسيقات المذكورة أعلاه
- تأكد من عمل الرابط في المتصفح

---

### ❌ "لم يصل إشعار للمحتوى الجديد"

**الأسباب المحتملة:**
1. **الرابط معطّل:** تحقق من `/social list` - يجب أن تكون الحالة ✅
2. **البوت لا يملك صلاحيات:** تحقق من أن البوت يستطيع الإرسال في قناة الإشعارات
3. **المحتوى قديم:** النظام لا يرسل إشعارات للمحتوى المنشور قبل إضافة الرابط
4. **فترة الانتظار:** انتظر 5-10 دقائق بعد نشر المحتوى
5. **API غير مُعدّة:** بعض المنصات (Twitch, Twitter) تحتاج إعداد API

**الحل:**
1. تفعيل الرابط: `/social toggle`
2. إعطاء البوت صلاحية "Send Messages" و "Embed Links"
3. اختبار الإشعار: `/social test`
4. إعداد API Keys للمنصات المطلوبة

---

### ❌ "المحتوى يظهر مكرراً"

**السبب:** خطأ في قاعدة البيانات أو إعادة تشغيل البوت.

**الحل:**
- هذا نادر الحدوث
- إذا حدث، سيتوقف تلقائياً بعد إعادة تشغيل البوت
- تواصل مع دعم البوت للإصلاح

---

### ⚠️ Snapchat - "لا يعمل مع الحسابات الخاصة"

**السبب:** Snapchat لا يعرض قصص الحسابات الخاصة للعامة.

**الحل:**
- استخدم حسابات عامة فقط
- تأكد من أن الحساب لديه "Public Profile"
- جرب فتح الرابط في متصفح للتأكد من وصوله

---

### ⚠️ "Twitch/Twitter لا يعملان"

**السبب:** تحتاج إعداد API Keys.

**الحل:**
1. راجع قسم "دليل المنصات" أعلاه
2. احصل على API Keys من المنصة الرسمية
3. أضفها للبيئة (Environment Variables)
4. أعد تشغيل البوت

---

## نصائح متقدمة 💡

### 1. تنظيم الإشعارات
```
# استراتيجية موصى بها:
- قناة #youtube-videos → YouTube فقط
- قناة #streams → Twitch + Kick
- قناة #social-updates → Twitter + Instagram + TikTok + Snapchat
```

### 2. استخدام الإشارات بذكاء
```
# أمثلة:
- @YouTube Subs → لقناة YouTube معينة
- @Stream Alerts → لجميع البثوث المباشرة
- @everyone → للمحتوى المهم فقط (لتجنب الإزعاج)
```

### 3. إدارة الروابط المجانية
```
# إذا كنت تستخدم الروابط المجانية (2 فقط):
1. اختر أهم قناتين فقط
2. أو منصتين مختلفتين (YouTube + Twitch مثلاً)
3. إذا أردت المزيد، اشترِ روابط إضافية
```

### 4. الروابط المشتراة
```
# استثمار ذكي:
- 200 ❄️ للرابط الدائم
- لا يحتاج تجديد أبداً
- يمكن شراء روابط لكل منصة تحبها
- مفيد للسيرفرات الكبيرة مع عدة قنوات
```

### 5. اختبار قبل النشر
```
# قبل الإعلان عن الرابط:
1. أضف الرابط: /social link
2. اختبر الإشعار: /social test
3. تأكد من ظهور الإشعار بشكل صحيح
4. عدّل القناة/الرتبة إذا لزم: /social notifications أو /social role
```

---

## الإحصائيات والتحليلات 📊

### `/social stats` - تحليل شامل

**ما يمكنك معرفته:**
```
📊 إحصائيات وسائل التواصل الاجتماعي

📈 إجمالي:
• الروابط: 8
• النشطة: 7
• الإشعارات: 2,543

📋 حسب المنصة:
🎥 YouTube: 3 (1,245 إشعار)
🟣 Twitch: 2 (678 إشعار)
👻 Snapchat: 2 (345 إشعار)
🟢 Kick: 1 (275 إشعار)
```

**فائدة:**
- معرفة المنصات الأكثر نشاطاً
- تتبع كفاءة الروابط
- اتخاذ قرار بشأن الروابط غير النشطة

---

## الأسئلة الشائعة ❓

### س1: كم مرة يتحقق البوت من المحتوى الجديد؟
**ج:** كل 5 دقائق لجميع الروابط النشطة.

### س2: هل يمكنني إضافة نفس القناة مرتين؟
**ج:** لا، كل رابط يجب أن يكون فريداً في السيرفر.

### س3: هل الروابط المشتراة تحتاج تجديد؟
**ج:** لا، دائمة مدى الحياة.

### س4: ماذا يحدث إذا حذفت قناة الإشعارات؟
**ج:** سيفشل الإشعار. يجب تحديث القناة عبر `/social notifications`.

### س5: هل يمكن ربط حساب Instagram خاص؟
**ج:** لا، Instagram و Snapchat تعملان للحسابات العامة فقط.

### س6: ماذا لو غيّر اليوتيوبر اسم قناته؟
**ج:** الرابط يعمل بالـ Channel ID، لا يتأثر بتغيير الاسم.

### س7: هل يمكن استخدام البوت في عدة سيرفرات؟
**ج:** نعم، كل سيرفر له حدوده الخاصة (2 روابط مجانية + مشتراة).

### س8: كيف أحصل على كريديت لشراء روابط؟
**ج:** استخدم نظام الكريديت في البوت (استشر مسؤولي البوت).

### س9: هل Snapchat موثوق؟
**ج:** يعمل حالياً لكنه يعتمد على طريقة غير رسمية. قد يتوقف إذا غيّر Snapchat موقعهم.

### س10: لماذا لا يعمل Twitter؟
**ج:** يحتاج API مدفوعة ($100/شهر). اختياري ما لم تقم بإعداده.

---

## الإصدارات والتحديثات 📅

### v4.0 (Phase 5.7) - الإصدار الحالي
**تاريخ:** 2024

**الميزات:**
- ✅ دعم 7 منصات (YouTube, Twitch, Kick, Twitter, Instagram, TikTok, **Snapchat**)
- ✅ نظام الروابط المجانية/المشتراة
- ✅ إشعارات مخصصة مع Embeds
- ✅ 10 أوامر إدارة
- ✅ إحصائيات مفصلة
- ✅ تكامل مع نظام الكريديت

**جديد في هذا الإصدار:**
- 👻 **Snapchat** - دعم كامل للقصص العامة
- ⚙️ Background task محسّن
- 📊 إحصائيات متقدمة
- 🔄 نظام منع التكرار محسّن

---

## التحديثات المستقبلية 🔮

### Phase 5.8 (قريباً)
- ✨ دعم كامل لـ Instagram
- ✨ دعم كامل لـ TikTok
- ✨ Webhook support لإشعارات فورية
- ✨ تخصيص رسائل الإشعارات
- ✨ فلاتر محتوى (كلمات مفتاحية)

### Phase 6.0 (مستقبلاً)
- ✨ Discord Events integration
- ✨ تحليلات متقدمة مع رسوم بيانية
- ✨ دعم منصات إضافية (Facebook, Reddit, etc.)
- ✨ AI content summarization

---

## الدعم والمساعدة 🆘

### واجهت مشكلة؟
1. **راجع هذا الدليل** - معظم المشاكل الشائعة موثقة
2. **استخدم `/social test`** - للتحقق من إعدادات الرابط
3. **تحقق من الصلاحيات** - تأكد من أن البوت له صلاحيات الإرسال
4. **تواصل مع الدعم** - إذا استمرت المشكلة

### تواصل معنا:
- **Discord Support Server:** [رابط السيرفر]
- **GitHub Issues:** [رابط المشروع]
- **Email:** support@kingdom77bot.com

---

## الخاتمة 🎓

نظام التكامل مع وسائل التواصل الاجتماعي هو أداة قوية لتحويل سيرفرك إلى مركز إشعارات متكامل. مع دعم 7 منصات بما فيها **Snapchat** الجديدة، يمكنك البقاء على اطلاع بآخر المحتوى من قنواتك المفضلة.

**ابدأ الآن:**
```
/social link
```

**استمتع بتجربتك! 🎉**

---

*Kingdom-77 Bot v4.0 - Built with ❤️ for the community*

*آخر تحديث: 2024 | Phase 5.7*
