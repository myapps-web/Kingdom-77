# 🛡️ Moderation System Guide
## Kingdom-77 Bot v3.0

دليل شامل لاستخدام نظام الإشراف في البوت

---

## 📋 نظرة عامة

نظام الإشراف يوفر أدوات كاملة لإدارة السيرفر:
- ⚠️ **نظام التحذيرات** - تحذير الأعضاء وتتبع المخالفات
- 🔇 **الكتم المؤقت** - كتم الأعضاء لفترة محددة
- 👢 **الطرد** - طرد الأعضاء من السيرفر
- 🔨 **الحظر** - حظر الأعضاء بشكل دائم
- 📋 **سجلات الإشراف** - تتبع جميع الإجراءات

---

## ⚙️ الإعداد الأولي

### 1. تفعيل الصلاحيات للبوت

تأكد من أن البوت لديه الصلاحيات:
- ✅ **Moderate Members** - للكتم
- ✅ **Kick Members** - للطرد
- ✅ **Ban Members** - للحظر
- ✅ **Send Messages** - لإرسال السجلات
- ✅ **Embed Links** - لعرض الرسائل المنسقة

### 2. تحديد قناة السجلات

```
/setmodlog #mod-logs
```

**الفائدة:**
- تسجيل جميع إجراءات الإشراف تلقائياً
- تتبع من قام بالإجراء ومتى
- أرشيف كامل للمخالفات

---

## 📝 الأوامر المتاحة

### ⚠️ نظام التحذيرات

#### `/warn` - إصدار تحذير

**الصلاحية المطلوبة:** Moderate Members

**الاستخدام:**
```
/warn @User سبب_التحذير
```

**مثال:**
```
/warn @Ahmed سبام في الشات العام
```

**ما يحدث:**
1. يتم تسجيل التحذير في قاعدة البيانات
2. يُرسل إشعار للعضو (DM)
3. يُسجل الإجراء في قناة السجلات
4. عند الوصول لـ 3 تحذيرات → تنبيه تلقائي

---

#### `/warnings` - عرض تحذيرات العضو

**الاستخدام:**
```
/warnings @User
```

**يعرض:**
- عدد التحذيرات النشطة
- إجمالي التحذيرات (بما فيها الملغاة)
- آخر 5 تحذيرات مع التفاصيل
- تاريخ كل تحذير والسبب

---

#### `/clearwarnings` - مسح التحذيرات

**الصلاحية المطلوبة:** Moderate Members

**الاستخدام:**
```
/clearwarnings @User
```

**يقوم بـ:**
- مسح جميع التحذيرات النشطة
- تسجيل الإجراء في السجلات
- إشعار المشرف بعدد التحذيرات الممسوحة

---

### 🔇 الكتم المؤقت

#### `/mute` - كتم عضو

**الصلاحية المطلوبة:** Moderate Members

**الاستخدام:**
```
/mute @User مدة سبب
```

**المدة المدعومة:**
- `10m` → 10 دقائق
- `1h` → ساعة واحدة
- `2d` → يومين

**مثال:**
```
/mute @Ahmed 30m إزعاج الأعضاء
```

**المميزات:**
- كتم تلقائي باستخدام Timeout من Discord
- رفع الكتم تلقائياً بعد انتهاء المدة
- إشعار للعضو بالسبب والمدة

---

#### `/unmute` - رفع الكتم

**الاستخدام:**
```
/unmute @User
```

**يقوم بـ:**
- رفع الكتم فوراً
- تسجيل الإجراء
- إشعار في السجلات

---

### 👢 الطرد والحظر

#### `/kick` - طرد عضو

**الصلاحية المطلوبة:** Kick Members

**الاستخدام:**
```
/kick @User سبب_الطرد
```

**مثال:**
```
/kick @Ahmed مخالفة متكررة للقوانين
```

**ملاحظة:** العضو يمكنه العودة عبر رابط الدعوة

---

#### `/ban` - حظر عضو

**الصلاحية المطلوبة:** Ban Members

**الاستخدام:**
```
/ban @User سبب delete_messages:عدد_الأيام
```

**المعاملات:**
- `delete_messages` - حذف رسائل العضو (0-7 أيام)

**مثال:**
```
/ban @Ahmed تخريب متعمد delete_messages:7
```

---

#### `/unban` - إلغاء الحظر

**الصلاحية المطلوبة:** Ban Members

**الاستخدام:**
```
/unban user_id
```

**مثال:**
```
/unban 123456789012345678
```

**كيف تحصل على User ID:**
1. فعّل Developer Mode (User Settings > Advanced)
2. انقر بزر الماوس الأيمن على اسم العضو
3. اختر "Copy User ID"

---

## 📊 نظام السجلات

### إعداد قناة السجلات

```
/setmodlog #mod-logs
```

### ما يُسجل:
- ⚠️ **التحذيرات** - من حذّر من؟
- 🔇 **الكتم** - المدة والسبب
- 👢 **الطرد** - السبب والمشرف
- 🔨 **الحظر** - تفاصيل كاملة
- ✅ **إلغاء الحظر** - من ومتى

### شكل السجل:
```
🛡️ WARN Action

👤 User: @Ahmed (123456...)
👮 Moderator: @Moderator
📝 Reason: سبام في الشات
```

---

## 🔍 أمثلة عملية

### سيناريو 1: عضو يسبام

```bash
# تحذير أول
/warn @User سبام في الشات العام

# تحذير ثاني
/warn @User سبام متكرر

# كتم مؤقت بعد التحذير الثالث
/mute @User 1h سبام متكرر بعد تحذيرين
```

### سيناريو 2: مخالفة خطيرة

```bash
# حظر مباشر
/ban @User تخريب متعمد للسيرفر delete_messages:7
```

### سيناريو 3: مراجعة تحذيرات

```bash
# عرض التحذيرات
/warnings @User

# إذا تاب العضو - مسح التحذيرات
/clearwarnings @User
```

---

## 📈 الإحصائيات والتقارير

### عرض سجل العضو

```python
# في المستقبل - قريباً
/modhistory @User
```

سيعرض:
- جميع الإجراءات المتخذة
- التحذيرات والكتم والطرد
- الإحصائيات والرسوم البيانية

---

## ⚙️ الإعدادات المتقدمة (قريباً)

### تخصيص عتبة التحذيرات

```python
# المستقبل
/modconfig warn_threshold 5
/modconfig warn_action mute
/modconfig warn_duration 1h
```

### تحديد الأدوار المسموح لها بالإشراف

```python
# المستقبل
/modconfig add_mod_role @Moderator
/modconfig remove_mod_role @Moderator
```

---

## 🛠️ استكشاف الأخطاء

### المشكلة: "Permission Denied"

**الحل:**
- تأكد من امتلاكك صلاحية Moderate Members
- تأكد من أن صلاحياتك أعلى من العضو المستهدف

### المشكلة: "Bot lacks permissions"

**الحل:**
- امنح البوت صلاحيات Moderate/Kick/Ban Members
- تأكد من ترتيب الأدوار (دور البوت أعلى من المستهدف)

### المشكلة: "Moderation system not available"

**الحل:**
- تأكد من أن MongoDB متصل
- راجع سجلات البوت للأخطاء

---

## 📚 قاعدة البيانات

### Collections المستخدمة:

#### `warnings`
```json
{
  "warning_id": "warn_abc123",
  "guild_id": "...",
  "user_id": "...",
  "moderator_id": "...",
  "reason": "...",
  "timestamp": "...",
  "active": true
}
```

#### `mod_actions`
```json
{
  "action_id": "action_xyz456",
  "action_type": "mute",
  "user_id": "...",
  "moderator_id": "...",
  "reason": "...",
  "duration": 3600,
  "timestamp": "..."
}
```

#### `guild_mod_config`
```json
{
  "guild_id": "...",
  "mod_log_channel": "...",
  "warn_threshold": 3,
  "settings": {...}
}
```

---

## 🚀 الميزات القادمة

- [ ] Auto-Moderation (فلترة الكلمات السيئة)
- [ ] نظام النقاط (Points System)
- [ ] تقارير الإشراف الشهرية
- [ ] أدوار الكتم المخصصة
- [ ] الحظر المؤقت (Temp Ban)

---

## 📞 الدعم

**إذا واجهت أي مشاكل:**
1. تحقق من صلاحيات البوت
2. راجع هذا الدليل
3. اتصل بفريق الدعم في السيرفر الرسمي

---

**تم إنشاؤه بواسطة:** Kingdom-77 Development Team  
**التاريخ:** أكتوبر 2025  
**الإصدار:** v3.0
